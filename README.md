# Buildkite Cloudwatch Metrics Publisher

## Deprecated

> Buildkite Cloudwatch Metrics Publisher has been deprecated and no longer maintained. You can now use [buildkite-metricsâ€™ AWS Lambda function support](https://github.com/buildkite/buildkite-metrics#aws-lambda) to send Buildkite build metrics to CloudWatch.

## Description

A CloudFormation stack that runs [buildkite-metrics](https://github.com/buildkite/buildkite-metrics) every 15 seconds and publishes the results to CloudWatch metrics. This stack is used as part of the [Elastic CI Stack for AWS](http://github.com/buildkite/elastic-ci-stack-for-aws/pulls).

[![Launch Buildkite Cloudwatch Metrics Stack](https://cdn.rawgit.com/buildkite/cloudformation-launch-stack-button-svg/master/launch-stack.svg)](https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=buildkite-cloudwatch-metrics-publisher&templateURL=https://s3.amazonaws.com/buildkite-cloudwatch-metrics-publisher/master/cloudwatch-metrics-publisher.json)

## Installing

The easiest way to install is to press the above button and then enter your org slug and your [Buildkite API Access Token](https://buildkite.com/user/api-access-tokens) (with the `read_pipelines`, `read_builds`, `read_agents` scopes enabled).

Alternately, run via the command-line:

```bash
aws cloudformation create-stack \
	--output text \
	--stack-name buildkite-cloudwatch-metrics-publisher \
	--disable-rollback \
	--template-body "https://s3.amazonaws.com/buildkite-cloudwatch-metrics-publisher/master/cloudwatch-metrics-publisher.json" \
	--capabilities CAPABILITY_IAM \
	--parameters ParameterKey=BuildkiteApiAccessToken,ParameterValue=BUILDKITE_API_TOKEN_GOES_HERE \
	ParameterKey=BuildkiteOrgSlug,ParameterValue=BUILDKITE_ORG_SLUG_GOES_HERE \
	ParameterKey=Subnets,ParameterValue=VPC_SUBNETS_GO_HERE
```

After the stack is run you will have the metrics generated by [buildkite-metrics](https://github.com/buildkite/buildkite-metrics) populated in CloudWatch.

## License

See [LICENSE.md](LICENSE.md) (MIT)
